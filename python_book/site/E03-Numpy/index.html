
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.6">
    
    
      
        <title>E3. Numpy - The Redd Python Book</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.802231af.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
          
          
          <meta name="theme-color" content="#546d78">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CSource+Code+Pro&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Source Code Pro"}</style>
      
    
    
    
      <link rel="stylesheet" href="../css/default.min.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue-grey" data-md-color-accent="deep-orange">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#e3-numpy" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="The Redd Python Book" class="md-header__button md-logo" aria-label="The Redd Python Book" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            The Redd Python Book
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              E3. Numpy
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="The Redd Python Book" class="md-nav__button md-logo" aria-label="The Redd Python Book" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5z"/></svg>

    </a>
    The Redd Python Book
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../00-Table-of-Contents/" class="md-nav__link">
        Table of Contents
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../01-Intro-and-How-to-Use-This-Book/" class="md-nav__link">
        1. Intro and How to Use This Book
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../02-Getting-Started/" class="md-nav__link">
        2. Getting Started
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../03-CLI/" class="md-nav__link">
        3. CLI
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../04-Hello-World/" class="md-nav__link">
        4. Hello World
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../05-Comments/" class="md-nav__link">
        5. Comments
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../06-Strings-and-the-Print-Function/" class="md-nav__link">
        6. Strings and the Print Function
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../07-Escape-Characters/" class="md-nav__link">
        7. Escape Characters
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../08-Formatted-Strings/" class="md-nav__link">
        8. Formatted Strings
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../09-Variables-and-Memory/" class="md-nav__link">
        9. Variables and Memory
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../10-Better-String-Formatting/" class="md-nav__link">
        10. Better String Formatting
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../11-Input-and-Output/" class="md-nav__link">
        11. Input and Output
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../12-Math-and-Data/" class="md-nav__link">
        12. Math and Data
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../13-Logic-and-Boolean-Operators/" class="md-nav__link">
        13. Logic and Boolean Operators
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../14-If-elif-and-else/" class="md-nav__link">
        14. If elif and else
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../15-Errors-Exceptions-and-Bugs/" class="md-nav__link">
        15. Errors Exceptions and Bugs
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../16-File-Reading-and-Writing/" class="md-nav__link">
        16. File Reading and Writing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../17-Loops/" class="md-nav__link">
        17. Loops
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../18-Iterables/" class="md-nav__link">
        18. Iterables
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../19-Dictionaries/" class="md-nav__link">
        19. Dictionaries
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../20-Functions/" class="md-nav__link">
        20. Functions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../21-More-Functions/" class="md-nav__link">
        21. More Functions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../22-Try-Except/" class="md-nav__link">
        22. Try Except
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../23-Imports/" class="md-nav__link">
        23. Imports
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../24-Reading-Code/" class="md-nav__link">
        24. Reading Code
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../25-Do-a-Project/" class="md-nav__link">
        25. Do a Project
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../26-Objects-and-Classes/" class="md-nav__link">
        26. Objects and Classes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../27-Inheritance-and-Polymorphism/" class="md-nav__link">
        27. Inheritance and Polymorphism
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../28-Modules/" class="md-nav__link">
        28. Modules
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../29-Comments-and-Code-Documentation/" class="md-nav__link">
        29. Comments and Code Documentation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../30-Packages-and-Project-Structure/" class="md-nav__link">
        30. Packages and Project Structure
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../31-Automated-Testing/" class="md-nav__link">
        31. Automated Testing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../32-Do-Another-Project/" class="md-nav__link">
        32. Do Another Project
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../33-Branching-Out/" class="md-nav__link">
        33. Branching Out
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../E01-Getting-Started-Again/" class="md-nav__link">
        E1. Getting Started Again
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../E02-Pandas/" class="md-nav__link">
        E2. Pandas
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          E3. Numpy
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        E3. Numpy
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#multiply-two-matrices" class="md-nav__link">
    Multiply Two Matrices
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#more-numpy-in-jupyter" class="md-nav__link">
    More numpy in Jupyter
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-numpy-manual" class="md-nav__link">
    The Numpy Manual
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../E10-Bringing-it-All-Together/" class="md-nav__link">
        E10. Bringing it All Together
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#multiply-two-matrices" class="md-nav__link">
    Multiply Two Matrices
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#more-numpy-in-jupyter" class="md-nav__link">
    More numpy in Jupyter
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-numpy-manual" class="md-nav__link">
    The Numpy Manual
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <!-- Navigation -->

<hr />
<p><a href="../E02-Pandas/">Previous: E02 - Pandas </a> | <a href="../00-Table-of-Contents/">Table of Contents</a> | <a href="../E10-Bringing-it-All-Together/">Next: E10 - Bringing it All Together</a></p>
<hr />
<!-- End Navigation -->
<h1 id="e3-numpy">E3 - Numpy</h1>
<p>This is a shorter section because there is less to explain. At the conclusion of this section, I will refer you to the official Numpy documentation because its way better than this book. (Trust me.) With that said, this should be a nice little introduction to get your feet wet.</p>
<p>Numpy is a Python library that allows complex math to be done easily. Generally, this library is ideal for performing linear algebra calculations and contains modules for common calculations. The following example should show this.</p>
<h2 id="multiply-two-matrices">Multiply Two Matrices</h2>
<p>The definition of matrix multiplication is given here for reference.</p>
<p><em>For two matricies <span class="arithmatex">\(A\)</span>, <span class="arithmatex">\(B\)</span> with row-column dimensions <span class="arithmatex">\(d,n\)</span> and <span class="arithmatex">\(n,f\)</span> respectively, each element (noted by <span class="arithmatex">\(r,c\)</span> for each row and column) of the matrix product <span class="arithmatex">\(C\)</span> of <span class="arithmatex">\(A\)</span> and <span class="arithmatex">\(B\)</span> (<span class="arithmatex">\(C = AB\)</span>â€‹):</em></p>
<div class="arithmatex">\[C_{r,c} = \sum^n_i A_{r,i} \cdot B_{i,c}\]</div>
<p>Given this definition we will code this into a Python program without and then with Numpy.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="c1"># np_matmul.py</span>
<span class="linenos" data-linenos=" 2 "></span><span class="kn">import</span> <span class="nn">timeit</span> <span class="c1"># get the module for timing code</span>
<span class="linenos" data-linenos=" 3 "></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span><span class="k">def</span> <span class="nf">matmul</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos=" 8 "></span><span class="sd">    Using built-in Python functions, multiply matricies</span>
<span class="linenos" data-linenos=" 9 "></span><span class="sd">    a and b and return an new matrix c.</span>
<span class="linenos" data-linenos="10 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="11 "></span>    <span class="n">d</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="linenos" data-linenos="12 "></span>    <span class="n">c</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.0</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">f</span><span class="p">)]</span> <span class="k">for</span> <span class="n">__</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">d</span><span class="p">)]</span>
<span class="linenos" data-linenos="13 "></span>
<span class="linenos" data-linenos="14 "></span>    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
<span class="linenos" data-linenos="15 "></span>        <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
<span class="linenos" data-linenos="16 "></span>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
<span class="linenos" data-linenos="17 "></span>                <span class="n">c</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">column</span><span class="p">]</span> <span class="o">+=</span> <span class="n">a</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">column</span><span class="p">]</span>
<span class="linenos" data-linenos="18 "></span>
<span class="linenos" data-linenos="19 "></span>    <span class="k">return</span> <span class="n">c</span>
<span class="linenos" data-linenos="20 "></span>
<span class="linenos" data-linenos="21 "></span>
<span class="linenos" data-linenos="22 "></span><span class="k">def</span> <span class="nf">np_matmul</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>    
<span class="linenos" data-linenos="23 "></span>    <span class="sd">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="24 "></span><span class="sd">    Using Numpy, multiply matricies</span>
<span class="linenos" data-linenos="25 "></span><span class="sd">    a and b and return an new matrix c.</span>
<span class="linenos" data-linenos="26 "></span><span class="sd">    We will use the special case of the @</span>
<span class="linenos" data-linenos="27 "></span><span class="sd">    operator here.</span>
<span class="linenos" data-linenos="28 "></span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos" data-linenos="29 "></span>    <span class="k">return</span> <span class="n">a</span> <span class="o">@</span> <span class="n">b</span>
<span class="linenos" data-linenos="30 "></span>
<span class="linenos" data-linenos="31 "></span>
<span class="linenos" data-linenos="32 "></span><span class="c1"># here are a and b, two matrices to be multiplied</span>
<span class="linenos" data-linenos="33 "></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos" data-linenos="34 "></span>    <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span>
<span class="linenos" data-linenos="35 "></span>    <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">],</span>
<span class="linenos" data-linenos="36 "></span>    <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="linenos" data-linenos="37 "></span><span class="p">]</span>
<span class="linenos" data-linenos="38 "></span><span class="n">b</span> <span class="o">=</span> <span class="p">[</span>
<span class="linenos" data-linenos="39 "></span>    <span class="p">[</span><span class="mi">2</span><span class="p">],</span>
<span class="linenos" data-linenos="40 "></span>    <span class="p">[</span><span class="mi">6</span><span class="p">],</span>
<span class="linenos" data-linenos="41 "></span>    <span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="linenos" data-linenos="42 "></span><span class="p">]</span>
<span class="linenos" data-linenos="43 "></span><span class="c1"># now pack these matrices into numpy array objects</span>
<span class="linenos" data-linenos="44 "></span><span class="n">a_array</span><span class="p">,</span> <span class="n">b_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="linenos" data-linenos="45 "></span>
<span class="linenos" data-linenos="46 "></span><span class="c1"># lets compare the two calculations by running them 10000 times</span>
<span class="linenos" data-linenos="47 "></span><span class="n">n_times</span> <span class="o">=</span> <span class="mi">10_000</span>
<span class="linenos" data-linenos="48 "></span><span class="n">t_matmul</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">matmul</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">),</span> <span class="n">number</span><span class="o">=</span><span class="n">n_times</span><span class="p">)</span>
<span class="linenos" data-linenos="49 "></span><span class="n">t_npmatmul</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span>
<span class="linenos" data-linenos="50 "></span>    <span class="k">lambda</span><span class="p">:</span> <span class="n">np_matmul</span><span class="p">(</span><span class="n">a_array</span><span class="p">,</span> <span class="n">b_array</span><span class="p">),</span> 
<span class="linenos" data-linenos="51 "></span>    <span class="n">number</span><span class="o">=</span><span class="n">n_times</span>
<span class="linenos" data-linenos="52 "></span><span class="p">)</span>
<span class="linenos" data-linenos="53 "></span><span class="n">pct_improvement</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">t_matmul</span> <span class="o">-</span> <span class="n">t_npmatmul</span><span class="p">)</span><span class="o">/</span><span class="n">t_matmul</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
<span class="linenos" data-linenos="54 "></span>
<span class="linenos" data-linenos="55 "></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="linenos" data-linenos="56 "></span><span class="s2">% improvement : </span><span class="si">{</span><span class="n">pct_improvement</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"></span>
<span class="linenos" data-linenos="57 "></span><span class="s2">time python   : </span><span class="si">{</span><span class="n">t_matmul</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"></span>
<span class="linenos" data-linenos="58 "></span><span class="s2">time numpy    : </span><span class="si">{</span><span class="n">t_npmatmul</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"></span>
<span class="linenos" data-linenos="59 "></span><span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>
</code></pre></div>
<p>This should produces qualitatively similar results to this:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>&gt; python np_matmul.py
<span class="linenos" data-linenos="2 "></span>
<span class="linenos" data-linenos="3 "></span>% improvement : 37
<span class="linenos" data-linenos="4 "></span>time python   : 0.066
<span class="linenos" data-linenos="5 "></span>time numpy    : 0.024
</code></pre></div>
<p>This shows how much faster Numpy is than plain Python. We will talk about the reason that this is but for now lets look at some other powerful things we can do with Numpy arrays.</p>
<h2 id="more-numpy-in-jupyter">More <code>numpy</code> in Jupyter</h2>
<p>The following is an exercise to be done in Jupyter (but you can just do it in Python too).</p>
<p><code>In[]:</code></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="c1"># do this in a Jupyter notebook</span>
<span class="linenos" data-linenos="2 "></span><span class="c1"># if you do this in a Python script,</span>
<span class="linenos" data-linenos="3 "></span><span class="c1"># replace all calls to &quot;display&quot;</span>
<span class="linenos" data-linenos="4 "></span><span class="c1"># with print</span>
<span class="linenos" data-linenos="5 "></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</code></pre></div>
<p><code>In[]:</code></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="c1"># we will start with two arrays</span>
<span class="linenos" data-linenos=" 2 "></span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="p">[</span><span class="mi">21</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">32</span><span class="p">],</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mf">129.2</span><span class="p">,</span> <span class="mf">234.0</span><span class="p">],</span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="linenos" data-linenos=" 6 "></span><span class="p">])</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1"># make a 3X3 array of zeros</span>
<span class="linenos" data-linenos=" 8 "></span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span> 
<span class="linenos" data-linenos=" 9 "></span><span class="n">display</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="linenos" data-linenos="10 "></span><span class="n">display</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</code></pre></div>
<p><code>Out[]:</code></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>array([[  21. ,   42. ,   32. ],
<span class="linenos" data-linenos="2 "></span>       [   1. , -129.2,  234. ],
<span class="linenos" data-linenos="3 "></span>       [   3. ,    6. ,    9. ]])
<span class="linenos" data-linenos="4 "></span>array([[0., 0., 0.],
<span class="linenos" data-linenos="5 "></span>       [0., 0., 0.],
<span class="linenos" data-linenos="6 "></span>       [0., 0., 0.]])
</code></pre></div>
<p><code>In[]:</code></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="c1"># notice that arrays are forced</span>
<span class="linenos" data-linenos="2 "></span><span class="c1"># to be all the same data type</span>
<span class="linenos" data-linenos="3 "></span><span class="n">display</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
</code></pre></div>
<p><code>Out[]:</code></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>dtype(&#39;float64&#39;)
<span class="linenos" data-linenos="2 "></span>dtype(&#39;float64&#39;)
</code></pre></div>
<p><code>In[]:</code></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="c1"># we can do element-wise math</span>
<span class="linenos" data-linenos="2 "></span><span class="n">display</span><span class="p">(</span><span class="n">b</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos" data-linenos="3 "></span><span class="n">display</span><span class="p">(</span><span class="n">a</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span>
<span class="linenos" data-linenos="4 "></span><span class="n">display</span><span class="p">((</span><span class="n">b</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">a</span><span class="p">)</span>
</code></pre></div>
<p><code>Out[]:</code></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>array([[1., 1., 1.],
<span class="linenos" data-linenos="2 "></span>       [1., 1., 1.],
<span class="linenos" data-linenos="3 "></span>       [1., 1., 1.]])
<span class="linenos" data-linenos="4 "></span>array([[ 0.21 ,  0.42 ,  0.32 ],
<span class="linenos" data-linenos="5 "></span>       [ 0.01 , -1.292,  2.34 ],
<span class="linenos" data-linenos="6 "></span>       [ 0.03 ,  0.06 ,  0.09 ]])
<span class="linenos" data-linenos="7 "></span>array([[  22. ,   43. ,   33. ],
<span class="linenos" data-linenos="8 "></span>       [   2. , -128.2,  235. ],
<span class="linenos" data-linenos="9 "></span>       [   4. ,    7. ,   10. ]])
</code></pre></div>
<p><code>In[]:</code></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="c1"># we can do linear algebra calculations like determinants</span>
<span class="linenos" data-linenos="2 "></span><span class="c1"># inverse matrices or solvers</span>
<span class="linenos" data-linenos="3 "></span><span class="n">display</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">det</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="linenos" data-linenos="4 "></span><span class="n">display</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">inv</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="linenos" data-linenos="5 "></span><span class="n">display</span><span class="p">(</span><span class="n">a</span> <span class="o">@</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">inv</span><span class="p">(</span><span class="n">a</span><span class="p">))</span> <span class="c1"># to prove it is the inverse</span>
<span class="linenos" data-linenos="6 "></span>
<span class="linenos" data-linenos="7 "></span><span class="c1"># get the first column of b+1</span>
<span class="linenos" data-linenos="8 "></span><span class="n">display</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="p">(</span><span class="n">b</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)[:,</span><span class="mi">1</span><span class="p">]))</span> 
</code></pre></div>
<p><code>Out[]:</code></p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>-12201.60000000001
<span class="linenos" data-linenos="2 "></span>array([[ 0.21036585,  0.0152439 , -1.14430894],
<span class="linenos" data-linenos="3 "></span>       [-0.05679583, -0.00762195,  0.40011146],
<span class="linenos" data-linenos="4 "></span>       [-0.03225806,  0.        ,  0.22580645]])
<span class="linenos" data-linenos="5 "></span>array([[ 1.0000000e+00,  0.0000000e+00, -8.8817842e-16],
<span class="linenos" data-linenos="6 "></span>       [ 8.8817842e-16,  1.0000000e+00,  0.0000000e+00],
<span class="linenos" data-linenos="7 "></span>       [ 0.0000000e+00, -6.9388939e-18,  1.0000000e+00]])
<span class="linenos" data-linenos="8 "></span>array([-0.91869919,  0.33569368,  0.19354839])
</code></pre></div>
<h2 id="the-numpy-manual">The Numpy Manual</h2>
<p>This is one area where I have to admit that the developers of Numpy do a much better job of explaining their software than I ever could. Therefore I am going to refer you to the <a href="https://numpy.org/doc/stable/">Numpy Manual</a> for further reading. The main thing I want you to get out of these exercises is the following:</p>
<ul>
<li>Numpy can do all sorts of powerful mathematical calculations with fewer lines of code than Python alone.</li>
<li>Numpy can do these calculations <em>much</em> faster than Python alone (37% faster on my computer).</li>
<li>You should use Numpy for calculations involving matrices and element-wise calculations.</li>
<li>Numpy software is designed to integrate with Scipy, Pandas, and other STEM-focused libraries.</li>
</ul>
<!-- Navigation -->

<hr />
<p><a href="../E02-Pandas/">Previous: E02 - Pandas </a> | <a href="../00-Table-of-Contents/">Table of Contents</a> | <a href="../E10-Bringing-it-All-Together/">Next: E10 - Bringing it All Together</a></p>
<hr />
<!-- End Navigation -->
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../E02-Pandas/" class="md-footer__link md-footer__link--prev" aria-label="Previous: E2. Pandas" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              E2. Pandas
            </div>
          </div>
        </a>
      
      
        
        <a href="../E10-Bringing-it-All-Together/" class="md-footer__link md-footer__link--next" aria-label="Next: E10. Bringing it All Together" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              E10. Bringing it All Together
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.409db549.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.756773cc.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../javascripts/highlight.min.js"></script>
      
        <script src="../javascripts/config.js"></script>
      
    
  </body>
</html>