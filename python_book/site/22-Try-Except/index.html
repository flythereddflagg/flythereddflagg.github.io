<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>22. Try Except - The Redd Python Book</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "22. Try Except";
    var mkdocs_page_input_path = "22-Try-Except.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> The Redd Python Book</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../00-Table-of-Contents/">Table of Contents</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../01-Intro-and-How-to-Use-This-Book/">1. Intro and How to Use This Book</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../02-Getting-Started/">2. Getting Started</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../03-CLI/">3. CLI</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../04-Hello-World/">4. Hello World</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../05-Comments/">5. Comments</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../06-Strings-and-the-Print-Function/">6. Strings and the Print Function</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../07-Escape-Characters/">7. Escape Characters</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../08-Formatted-Strings/">8. Formatted Strings</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../09-Variables-and-Memory/">9. Variables and Memory</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../10-Better-String-Formatting/">10. Better String Formatting</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../11-Input-and-Output/">11. Input and Output</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../12-Math-and-Data/">12. Math and Data</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../13-Logic-and-Boolean-Operators/">13. Logic and Boolean Operators</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../14-If-elif-and-else/">14. If elif and else</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../15-Errors-Exceptions-and-Bugs/">15. Errors Exceptions and Bugs</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../16-File-Reading-and-Writing/">16. File Reading and Writing</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../17-Loops/">17. Loops</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../18-Iterables/">18. Iterables</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../19-Dictionaries/">19. Dictionaries</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../20-Functions/">20. Functions</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../21-More-Functions/">21. More Functions</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">22. Try Except</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#22-try-except">22 - Try Except</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#the-try-except-statement">The try-except Statement</a></li>
        
            <li><a class="toctree-l3" href="#raising-exceptions">Raising Exceptions</a></li>
        
            <li><a class="toctree-l3" href="#line-continuation">Line Continuation</a></li>
        
            <li><a class="toctree-l3" href="#hone-your-skills">Hone Your Skills</a></li>
        
            <li><a class="toctree-l3" href="#advanced-mastery">Advanced Mastery</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../23-Imports/">23. Imports</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../24-Reading-Code/">24. Reading Code</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../25-Do-a-Project/">25. Do a Project</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../26-Objects-and-Classes/">26. Objects and Classes</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../27-Inheritance-and-Polymorphism/">27. Inheritance and Polymorphism</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../28-Modules/">28. Modules</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../29-Comments-and-Code-Documentation/">29. Comments and Code Documentation</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../30-Packages-and-Project-Structure/">30. Packages and Project Structure</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">The Redd Python Book</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>22. Try Except</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <!-- Navigation -->

<hr />
<p><a href="../21-More-Functions/">Previous: 21-More Functions</a> | <a href="../00-Table-of-Contents/">Table of Contents</a> | <a href="../23-Imports/">Next: 23-Imports</a></p>
<hr />
<!-- End Navigation -->

<h1 id="22-try-except">22 - Try Except</h1>
<p>Surely you have noticed by now that errors can be common as you program. Well they are more than common. They are practically inevitable. In this lesson we will explore how you can "try" some code without letting it break your program.</p>
<pre><code class="python"># try_except.py

month_names = [
    &quot;January&quot;,
    &quot;February&quot;,
    &quot;March&quot;,
    &quot;April&quot;,
    &quot;May&quot;,
    &quot;June&quot;,
    &quot;July&quot;,
    &quot;August&quot;,
    &quot;September&quot;,
    &quot;October&quot;,
    &quot;November&quot;,
    &quot;December&quot;]

running = True

while running:
    date_string = input(&quot;Enter a date of the format: MM/DD/YYYY\n--&gt; &quot;)

    try:
        month, day, year = date_string.split(&quot;/&quot;)
        month, day, year = int(month), int(day), int(year)

        if day &lt; 1 or day &gt; 31:
            raise Exception(&quot;Invalid day value.&quot;)

        era = &quot;B.C.&quot; if year &lt; 0 else &quot;A.D.&quot;
        year = abs(year)

        print(f&quot;The date you entered was {month_names[month - 1]}&quot;\
              &quot; {day} in the year {year} {era}&quot;)
        running = False

    except Exception as e:
        print(&quot;Invalid Date detected!&quot;)
        print(e)

</code></pre>

<p><strong>Here is what should happen</strong></p>
<pre><code>$ python try_except.py
Enter a date of the format: MM/DD/YYYY
--&gt; 100/10/1230
Invalid Date detected!
list index out of range
Enter a date of the format: MM/DD/YYYY
--&gt; 12/200/-30
Invalid Date detected!
Invalid day value.
Enter a date of the format: MM/DD/YYYY
--&gt; 12/10/-100
The date you entered was December 10 in the year 100 B.C.
$
</code></pre>

<h3 id="the-try-except-statement">The <code>try-except</code> Statement</h3>
<p>Most of the time time in programming, you, the programmer, cannot guarantee that an error will not occur or an exception will not be thrown. You could try to prevent every problem with a series of if statements but   that becomes cumbersome and is difficult to cover every eventuality.</p>
<p>Python deals with this problem with <code>try-except</code> statements. A <code>try</code> statement will attempt to execute code in its corresponding block of indented code until an exception is "raised" or "thrown". If such is the case, then the <code>try</code> block stops and the <code>except</code> block is executed. If no exceptions are "raised" the the except block is skipped. In <code>try_except.py</code>, we used the statement to deal with bad user input and invalid dates. The syntax is as follows:</p>
<pre><code class="python">try:
    # Block of code you expect may
    # raise an exception
except:
    # this block runs if an exception is raised
</code></pre>

<p>You will notice that we added a part to the except line that reads <code>except Exception as e:</code>. This allows us to capture data about the Exception that was thrown but the <code>Exception</code> covers all exceptions that can be thrown in Python. If you wish to catch a particular exception or multiple types of exceptions you may do so with multiple <code>except</code> blocks as follows:</p>
<pre><code class="python">try:
    # Block of code you expect may
    # raise an exception
except ZeroDivisionError:
    # this block runs if the 
    # try block tries to divide by 0
except TypeError:
    # this block runs if 
    # a type error is raised
except Exception as e:
    # this block runs for all other exceptions
</code></pre>

<p>Any exception in Python can be handled this way. When writing these statements one should always order them from specific errors to more general errors. This is because Python will execute the first valid <code>except</code> block it comes to. Therefore if you begin your list of except blocks with <code>except Exception:</code> no other <code>except</code> block will ever run.</p>
<p>These statements allow for writing more secure code that can handle any amount of garbage that is fed to it. Use these judiciously as overuse can clutter your code and silence bugs and issues in your programs. </p>
<h3 id="raising-exceptions">Raising Exceptions</h3>
<p>We saw in <code>try_except.py</code> that we can force an exception to be raised with the <code>raise</code> statement. This is a powerful tool as it allows us to throw exceptions with customized messages. These can be very useful in debugging especially if we are careful about where we raise errors and what message we send. In our case we just wanted to send a general error to the user so a general <code>Exception</code> worked just fine here.</p>
<h3 id="line-continuation">Line Continuation</h3>
<p>You may have noticed the snippet of code from <code>try_except.py</code>:</p>
<pre><code class="python">print(f&quot;The date you entered was {month_names[month - 1]}&quot;\
              f&quot; {day} in the year {year} {era}&quot;)
</code></pre>

<p>The backslash <code>\</code> at the end of the line is called a "line continuation character" and allows us to split long lines of code into multiple lines that are interpreted as one line of code. These are useful when you are trying to limit the length of your lines for ease of reading.</p>
<h2 id="hone-your-skills">Hone Your Skills</h2>
<ul>
<li>Change the code to catch specific exceptions such as a <code>TypeError</code> and others. Try to do multiple <code>except</code> statements. How does this improve your code's usability?</li>
<li>Change the code to <code>raise</code> some errors when a date is invalid. Does your message help the user understand what went wrong?</li>
<li>Experiment with the security of this script. Try to break it or make it produce invalid dates. You may notice some dates that can be written are invalid. Rewrite this script so that it cannot produce an invalid date according to the <a href="https://en.wikipedia.org/wiki/Gregorian_calendar">Gregorian Calendar</a>. (Go as detailed as you like, but at least account for basic leap years and months having different lengths.)</li>
</ul>
<h2 id="advanced-mastery">Advanced Mastery</h2>
<ul>
<li>What is a <a href="https://docs.python.org/3/tutorial/errors.html#user-defined-exceptions">User-Defined Exception</a> and why would you want to use one?</li>
<li>What is the <a href="https://docs.python.org/3/tutorial/errors.html#defining-clean-up-actions"><code>finally</code></a> statement for and why would you need it?</li>
</ul>
<!-- Navigation -->

<hr />
<p><a href="../21-More-Functions/">Previous: 21-More Functions</a> | <a href="../00-Table-of-Contents/">Table of Contents</a> | <a href="../23-Imports/">Next: 23-Imports</a></p>
<hr />
<!-- End Navigation -->
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../23-Imports/" class="btn btn-neutral float-right" title="23. Imports">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../21-More-Functions/" class="btn btn-neutral" title="21. More Functions"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../21-More-Functions/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../23-Imports/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
